{"ast":null,"code":"var _jsxFileName = \"C:\\\\Estudos\\\\Algoritmos Avan\\xE7ados - Martim\\\\AlgoritmoCistercienses\\\\FrontEnd\\\\src\\\\components\\\\ImageMessage.js\";\nimport React from \"react\";\nimport \"../App.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ImageMessage = ({\n  imageUrl,\n  auxImages,\n  numeroSolicitado\n}) => {\n  // const downloadImage = async () => {\n  //   try {\n  //     const response = await fetch(imageUrl);\n  //     const blob = await response.blob();\n  //     const url = window.URL.createObjectURL(blob);\n  //     const link = document.createElement(\"a\");\n  //     link.href = url;\n  //     link.download = `${numeroSolicitado}.png`;\n  //     document.body.appendChild(link);\n  //     link.click();\n  //     document.body.removeChild(link);\n  //     window.URL.revokeObjectURL(url);\n  //   } catch (error) {\n  //     alert(\"Erro ao baixar a imagem.\");\n  //   }\n  // };\n\n  const downloadImage = async () => {\n    try {\n      const image = new Image();\n      image.crossOrigin = \"anonymous\"; // Evita problemas com CORS\n      image.src = imageUrl;\n      await new Promise((resolve, reject) => {\n        image.onload = resolve;\n        image.onerror = reject;\n      });\n      const cropWidth = 93;\n      const cropHeight = 133;\n\n      // Você pode ajustar a origem do recorte se quiser centralizar\n      const cropX = (image.width - cropWidth) / 2;\n      const cropY = (image.height - cropHeight) / 2;\n      const canvas = document.createElement(\"canvas\");\n      canvas.width = cropWidth;\n      canvas.height = cropHeight;\n      const ctx = canvas.getContext(\"2d\");\n      ctx.drawImage(image, cropX, cropY, cropWidth, cropHeight,\n      // recorte da imagem original\n      0, 0, cropWidth, cropHeight // posição e tamanho no canvas\n      );\n      canvas.toBlob(blob => {\n        const url = window.URL.createObjectURL(blob);\n        const link = document.createElement(\"a\");\n        link.href = url;\n        link.download = `${numeroSolicitado}_93x133.png`;\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n        window.URL.revokeObjectURL(url);\n      }, \"image/png\");\n    } catch (error) {\n      alert(\"Erro ao baixar a imagem recortada.\");\n      console.error(error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"image-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n      src: imageUrl,\n      alt: \"N\\xFAmero Cisterciense\",\n      className: \"numero-imagem\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"image-actions\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => window.open(imageUrl, \"_blank\"),\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-search-plus\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"image-button\",\n        onClick: downloadImage,\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-download\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), (auxImages === null || auxImages === void 0 ? void 0 : auxImages.length) > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"aux-images\",\n      children: auxImages.map((imgUrl, i) => /*#__PURE__*/_jsxDEV(\"img\", {\n        src: imgUrl,\n        alt: `Parte ${i + 1}`,\n        className: \"aux-imagem\",\n        style: {\n          margin: \"5px\",\n          height: \"120px\"\n        }\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 5\n  }, this);\n};\n_c = ImageMessage;\nexport default ImageMessage;\nvar _c;\n$RefreshReg$(_c, \"ImageMessage\");","map":{"version":3,"names":["React","jsxDEV","_jsxDEV","ImageMessage","imageUrl","auxImages","numeroSolicitado","downloadImage","image","Image","crossOrigin","src","Promise","resolve","reject","onload","onerror","cropWidth","cropHeight","cropX","width","cropY","height","canvas","document","createElement","ctx","getContext","drawImage","toBlob","blob","url","window","URL","createObjectURL","link","href","download","body","appendChild","click","removeChild","revokeObjectURL","error","alert","console","className","children","alt","fileName","_jsxFileName","lineNumber","columnNumber","onClick","open","length","map","imgUrl","i","style","margin","_c","$RefreshReg$"],"sources":["C:/Estudos/Algoritmos Avançados - Martim/AlgoritmoCistercienses/FrontEnd/src/components/ImageMessage.js"],"sourcesContent":["import React from \"react\";\r\nimport \"../App.css\";\r\n\r\nconst ImageMessage = ({ imageUrl, auxImages, numeroSolicitado }) => {\r\n  // const downloadImage = async () => {\r\n  //   try {\r\n  //     const response = await fetch(imageUrl);\r\n  //     const blob = await response.blob();\r\n  //     const url = window.URL.createObjectURL(blob);\r\n  //     const link = document.createElement(\"a\");\r\n  //     link.href = url;\r\n  //     link.download = `${numeroSolicitado}.png`;\r\n  //     document.body.appendChild(link);\r\n  //     link.click();\r\n  //     document.body.removeChild(link);\r\n  //     window.URL.revokeObjectURL(url);\r\n  //   } catch (error) {\r\n  //     alert(\"Erro ao baixar a imagem.\");\r\n  //   }\r\n  // };\r\n\r\n  const downloadImage = async () => {\r\n    try {\r\n      const image = new Image();\r\n      image.crossOrigin = \"anonymous\"; // Evita problemas com CORS\r\n      image.src = imageUrl;\r\n  \r\n      await new Promise((resolve, reject) => {\r\n        image.onload = resolve;\r\n        image.onerror = reject;\r\n      });\r\n  \r\n      const cropWidth = 93;\r\n      const cropHeight = 133;\r\n  \r\n      // Você pode ajustar a origem do recorte se quiser centralizar\r\n      const cropX = (image.width - cropWidth) / 2;\r\n      const cropY = (image.height - cropHeight) / 2;\r\n  \r\n      const canvas = document.createElement(\"canvas\");\r\n      canvas.width = cropWidth;\r\n      canvas.height = cropHeight;\r\n      const ctx = canvas.getContext(\"2d\");\r\n  \r\n      ctx.drawImage(\r\n        image,\r\n        cropX, cropY, cropWidth, cropHeight,  // recorte da imagem original\r\n        0, 0, cropWidth, cropHeight           // posição e tamanho no canvas\r\n      );\r\n  \r\n      canvas.toBlob((blob) => {\r\n        const url = window.URL.createObjectURL(blob);\r\n        const link = document.createElement(\"a\");\r\n        link.href = url;\r\n        link.download = `${numeroSolicitado}_93x133.png`;\r\n        document.body.appendChild(link);\r\n        link.click();\r\n        document.body.removeChild(link);\r\n        window.URL.revokeObjectURL(url);\r\n      }, \"image/png\");\r\n  \r\n    } catch (error) {\r\n      alert(\"Erro ao baixar a imagem recortada.\");\r\n      console.error(error);\r\n    }\r\n  };\r\n  \r\n\r\n  return (\r\n    <div className=\"image-container\">\r\n      <img src={imageUrl} alt=\"Número Cisterciense\" className=\"numero-imagem\" />\r\n      <div className=\"image-actions\">\r\n        <button onClick={() => window.open(imageUrl, \"_blank\")}>\r\n          <i className=\"fas fa-search-plus\"></i>\r\n        </button>\r\n        <button className=\"image-button\" onClick={downloadImage}>\r\n          <i className=\"fas fa-download\"></i>\r\n        </button>\r\n      </div>\r\n      {auxImages?.length > 0 && (\r\n        <div className=\"aux-images\">\r\n          {auxImages.map((imgUrl, i) => (\r\n            <img\r\n              key={i}\r\n              src={imgUrl}\r\n              alt={`Parte ${i + 1}`}\r\n              className=\"aux-imagem\"\r\n              style={{ margin: \"5px\", height: \"120px\" }}\r\n            />\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ImageMessage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}